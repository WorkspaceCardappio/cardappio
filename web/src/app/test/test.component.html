<div class="test-content">
  <div class="components-grid">
    <div class="left-column">
      <div class="component-section">
        <h3>Date Selection</h3>
        <cardappio-date-picker
          [selectedDate]="formState.selectedDate"
          (dateChange)="onDateSelected($event)"
          topLabel="Select Date"
          size="40">
        </cardappio-date-picker>
        <div class="result">
          <strong>Selected:</strong> {{ formState.selectedDate | date:'dd/MM/yyyy' }}
        </div>
      </div>

      <div class="component-section">
        <h3>Single User Selection</h3>
        <carddapio-autocomplete
          [search]="searchUsers"
          [displayField]="displayUserName"
          placeholder="Search users..."
          topLabelInput="Select a user"
          [isMultiple]="false"
          [size]="40"
          (selectionChange)="onUserSelected($event)"
          (clear)="onClearSingleUser()">
        </carddapio-autocomplete>
        <div class="result">
          <strong>Selected User:</strong> {{ formState.selectedUser?.name || 'None' }}
        </div>
      </div>

      <div class="component-section">
        <h3>Form Actions</h3>
        <div class="buttons-section">
          <cardappio-save-button
            [disabled]="!isFormValid"
            (onClick)="onSave()">
          </cardappio-save-button>
          <cardappio-cancel-button
            (onClick)="onCancel()">
          </cardappio-cancel-button>
        </div>
        @if (!isFormValid) {
          <div class="warning">
            <small>Accept terms and conditions to enable save</small>
          </div>
        }
      </div>

      <div class="component-section">
        <h3>Available Actions</h3>
        <p>Sample actions for record ID: 123</p>
        <cardappio-actions-list
          nameRoute="/users"
          [id]="123">
        </cardappio-actions-list>
      </div>
    </div>

    <div class="right-column">
      <div class="component-section">
        <h3>Multiple User Selection</h3>
        <carddapio-autocomplete
          [search]="searchUsers"
          [displayField]="displayUserName"
          [displayMultipleField]="displayUserEmail"
          placeholder="Search multiple users..."
          topLabelInput="Select multiple users"
          [isMultiple]="true"
          [size]="40"
          (selectionChange)="onMultipleUsersSelected($event)"
          (clear)="onClearMultipleUsers()">
        </carddapio-autocomplete>
        <div class="result">
          <strong>Selected Users:</strong> {{ formState.selectedMultipleUsers.length }} user(s)
        </div>
        @if (formState.selectedMultipleUsers.length > 0) {
          <div class="selected-users">
            @for (user of formState.selectedMultipleUsers; track user.id) {
              <div class="user-chip">
                <span class="user-name">{{ user.name }}</span>
                <span class="user-email">{{ user.email }}</span>
              </div>
            }
          </div>
        }
      </div>

      <div class="component-section">
        <h3>Form Controls</h3>
        <div class="form-controls">
          <cardappio-toggle
            label="Enable Feature"
            [(ngModel)]="formState.isFeatureEnabled"
            (onSwitch)="onFeatureToggleChange($event)">
          </cardappio-toggle>

          <cardappio-toggle
            label="Receive Notifications"
            [(ngModel)]="formState.receiveNotifications"
            (onSwitch)="onNotificationsToggleChange($event)">
          </cardappio-toggle>

          <div (click)="toggleTerms()">
            <cardappio-checkbox
              spanMessage="I accept the terms and conditions"
              [defaultChecked]="formState.acceptsTerms"
              checkedColor="#51CF66">
            </cardappio-checkbox>
          </div>
        </div>

        <div class="results">
          <div class="result-item">
            <strong>Feature Enabled:</strong>
            <span [class]="formState.isFeatureEnabled ? 'status-yes' : 'status-no'">
              {{ formState.isFeatureEnabled ? 'Yes' : 'No' }}
            </span>
          </div>
          <div class="result-item">
            <strong>Receive Notifications:</strong>
            <span [class]="formState.receiveNotifications ? 'status-yes' : 'status-no'">
              {{ formState.receiveNotifications ? 'Yes' : 'No' }}
            </span>
          </div>
          <div class="result-item">
            <strong>Terms Accepted:</strong>
            <span [class]="formState.acceptsTerms ? 'status-yes' : 'status-no'">
              {{ formState.acceptsTerms ? 'Yes' : 'No' }}
            </span>
          </div>
        </div>
      </div>

      <div class="component-section">
        <h3>Filter & Dialog</h3>
        <cardappio-dropdown-type-filter
          [type]="'string'"
          (selectedChange)="onFilterChange($event)">
        </cardappio-dropdown-type-filter>
        <button class="demo-button" (click)="openDialog()">
          Open Custom Dialog
        </button>
      </div>
    </div>
  </div>

  @if (showCustomDialog) {
    <cardappio-dialog
      [params]="{
        title: 'Custom Dialog Test',
        content: 'This is a custom dialog example with different content.'
      }"
      (eventCancel)="closeDialog()"
      (eventConfirm)="confirmDialog()">
    </cardappio-dialog>
  }
</div>
