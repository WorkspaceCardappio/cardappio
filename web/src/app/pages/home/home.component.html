<div class="dashboard-container">
  <h2 class="dashboard-title">Dashboard - Cardappio</h2>
  <div class="kpi-grid">
    <p-card class="kpi-card kpi-orders">
      <div class="kpi-content">
        <div class="kpi-icon">
          <i class="pi pi-shopping-cart"></i>
        </div>
        <div class="kpi-info">
          <span class="kpi-label">Pedidos Hoje</span>
          <span class="kpi-value">{{ stats.ordersToday }}</span>
          <span class="kpi-sublabel">Total: {{ stats.totalOrders }}</span>
        </div>
      </div>
    </p-card>

    <p-card class="kpi-card kpi-revenue">
      <div class="kpi-content">
        <div class="kpi-icon">
          <i class="pi pi-dollar"></i>
        </div>
        <div class="kpi-info">
          <span class="kpi-label">Faturamento Hoje</span>
          <span class="kpi-value">R$ {{ stats.revenueToday | number:'1.2-2' }}</span>
          <span class="kpi-sublabel">Total: R$ {{ stats.totalRevenue | number:'1.2-2' }}</span>
        </div>
      </div>
    </p-card>

    <p-card class="kpi-card kpi-ticket">
      <div class="kpi-content">
        <div class="kpi-icon">
          <i class="pi pi-chart-line"></i>
        </div>
        <div class="kpi-info">
          <span class="kpi-label">Ticket Médio</span>
          <span class="kpi-value">R$ {{ stats.averageTicket | number:'1.2-2' }}</span>
          <span class="kpi-sublabel">Por pedido</span>
        </div>
      </div>
    </p-card>

    <p-card class="kpi-card kpi-tables">
      <div class="kpi-content">
        <div class="kpi-icon">
          <i class="pi pi-list"></i>
        </div>
        <div class="kpi-info">
          <span class="kpi-label">Comandas Abertas</span>
          <span class="kpi-value">{{ stats.openTables }}</span>
          <span class="kpi-sublabel">Ativas agora</span>
        </div>
      </div>
    </p-card>
  </div>

  @if (isBrowser) {
  <div class="charts-grid">
    <p-card class="chart-card">
      <ng-template pTemplate="header">
        <div class="chart-header">
          <h3>Pedidos - Últimos 7 dias</h3>
        </div>
      </ng-template>
      <div class="chart-container">
        <canvas baseChart
          [data]="ordersLineChartData"
          [options]="ordersLineChartOptions"
          type="line">
        </canvas>
      </div>
    </p-card>

    <p-card class="chart-card">
      <ng-template pTemplate="header">
        <div class="chart-header">
          <h3>Status dos Pedidos</h3>
        </div>
      </ng-template>
      <div class="chart-container">
        <canvas baseChart
          [data]="statusDoughnutChartData"
          [options]="statusDoughnutChartOptions"
          type="doughnut">
        </canvas>
      </div>
    </p-card>

    <p-card class="chart-card">
      <ng-template pTemplate="header">
        <div class="chart-header">
          <h3>Faturamento - Últimos 7 dias</h3>
        </div>
      </ng-template>
      <div class="chart-container">
        <canvas baseChart
          [data]="revenueBarChartData"
          [options]="revenueBarChartOptions"
          type="bar">
        </canvas>
      </div>
    </p-card>

    <p-card class="chart-card">
      <ng-template pTemplate="header">
        <div class="chart-header">
          <h3>Top 5 Produtos por Receita</h3>
        </div>
      </ng-template>
      <div class="chart-container">
        <canvas baseChart
          [data]="topProductsBarChartData"
          [options]="topProductsBarChartOptions"
          type="bar">
        </canvas>
      </div>
    </p-card>
  </div>
  }
</div>
