<p-breadcrumb [model]="items" [home]="home"></p-breadcrumb>

<p-fieldset legend="Novo Pedido">
  <p-stepper [value]="1" class="basis-[50rem]">
    <p-step-list>
      <p-step [value]="1">Informações Gerais</p-step>
      <p-step [value]="2">Adicionais</p-step>
      <p-step [value]="3">Variáveis</p-step>
      <p-step [value]="4">Resumo</p-step>
    </p-step-list>
    <form [formGroup]="form" class="p-fluid">
      <p-step-panels>
        <p-step-panel [value]="1">
          <ng-template #content let-activateCallback="activateCallback">
            <div class="grid mt-4">
              <div class="col-6 flex flex-column mb-4 gap-1">
                <label for="products">Produtos</label>
                <p-autoComplete
                  id="products"
                  formControlName="products"
                  [suggestions]="filteredProducts"
                  (completeMethod)="searchProducts($event)"
                  [multiple]="true"
                  [dropdown]="true"
                  placeholder="Selecione os produtos"
                  optionLabel="name"
                  fluid
                >
                </p-autoComplete>
              </div>

              <div class="col-6 flex flex-column mb-4 gap-1">
                <label for="ticket">Comanda</label>
                <p-autoComplete
                  id="ticket"
                  formControlName="ticket"
                  [suggestions]="filteredTickets"
                  (completeMethod)="searchTickets($event)"
                  [dropdown]="true"
                  placeholder="Selecione a comanda"
                  optionLabel="number"
                  fluid
                >
                </p-autoComplete>
              </div>

              <div class="col-6 flex flex-column mb-4 gap-1">
                <label for="total">Preço Final</label>
                <p-inputNumber
                  id="total"
                  formControlName="total"
                  mode="currency"
                  currency="BRL"
                  locale="pt-BR"
                  placeholder="R$ 0,00"
                >
                </p-inputNumber>
              </div>
            </div>

            <div class="mt-4 flex justify-content-end gap-2">
              <button
                pButton
                type="button"
                label="Cancelar"
                severity="danger"
                (click)="onCancel()"
              ></button>
              <button
                pButton
                type="button"
                label="Salvar"
                class="p-button-primary"
                (click)="activateCallback(2)"
              ></button>
            </div>
          </ng-template>
        </p-step-panel>
        <p-step-panel [value]="2"> </p-step-panel>
        <p-step-panel [value]="3"> </p-step-panel>
        <p-step-panel [value]="4"> </p-step-panel>
      </p-step-panels>
    </form>
  </p-stepper>
</p-fieldset>
