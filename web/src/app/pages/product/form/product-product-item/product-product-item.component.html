<form [formGroup]="productItemForm">
     <div class="grid w-full gap-4">
        <div class="col-3 flex flex-column gap-1">
          <label>Tamanho</label>
          <p-select
            [options]="itemSize"
            formControlName="size"
            placeholder="Selecione o tamanho">
          </p-select>
        </div>

        <div class="col-3 flex flex-column gap-1">
          <label>Preço</label>
          <p-inputNumber
            formControlName="price"
            mode="currency"
            currency="BRL"
            locale="pt-BR"
            placeholder="Preço">
          </p-inputNumber>
        </div>

        <div class="col-3 flex flex-column gap-1">
          <label>Quantidade disponível</label>
          <input 
            pInputText 
            formControlName="quantity"
            placeholder="Quantidade">
        </div>

        <div class="col-3 flex flex-column gap-1">
          <label>Ativo</label>
          <p-toggle-switch formControlName="active"></p-toggle-switch>
        </div>

        <div class="col-12 flex flex-column gap-1">
          <label>Descrição</label>
          <textarea 
            pTextarea rows="3"
            formControlName="description"
            >
        </textarea>
        </div>
      </div>

      <div class="mt-4">
        <h4>Ingredientes</h4>
        <p-table 
            [value]="productItemForm.get('ingredients')?.value"
            showGridlines>
          <ng-template pTemplate="header">
            <tr>
              <th>Ingrediente</th>
              <th>Quantidade usada</th>
              <th>Unidade de medida</th>
              <th style="width: 8rem">Ações</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-ing let-idx="rowIndex">
            <tr [formGroupName]="idx">
              <td>{{ ing.ingredient.name }}</td>
              <td>
                <p-inputNumber
                  [(ngModel)]="ing.quantity"
                  [min]="0"
                  placeholder="Quantidade"
                  (ngModelChange)="saveLocalStorage()">
                </p-inputNumber>
              </td>
              <td>{{ ing }}</td>
              <td>
                <p-button 
                  icon="pi pi-trash" 
                  class="p-button-text p-button-danger p-button-sm"
                  >
                </p-button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="4" class="text-center">Nenhum ingrediente adicionado.</td>
            </tr>
          </ng-template>
        </p-table>

        <div class="flex justify-end mt-2">
          <p-button 
            label="Adicionar Ingrediente do Produto" 
            icon="pi pi-plus" 
            >
          </p-button>
        </div>
      </div>

 <div class="col-12 flex justify-end mt-4">
    <p-button 
      label="Adicionar Produto Item" 
      icon="pi pi-plus">
    </p-button>
  </div>
