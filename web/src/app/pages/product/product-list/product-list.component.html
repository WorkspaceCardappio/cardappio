<h2>Produto</h2>
<p-table
  #dt2
  [value]="products"
  dataKey="id"
  [rows]="10"
  [paginator]="true"
  [rowsPerPageOptions]="[10, 25, 50]"
  [loading]="loading"
  [globalFilterFields]="['name', 'category', 'price', 'active']"
  [tableStyle]="{ 'min-width': '75rem' }"
>
<ng-template #caption>
  <div class="flex">
    <p-button
      label="Novo Produto"
      icon="pi pi-plus"
      styleClass="p-button-success"
      routerLink="/product/new"
    ></p-button>

    <p-iconfield iconPosition="left" class="ml-auto">
      <p-inputicon>
        <i class="pi pi-search"></i>
      </p-inputicon>
      <input
        pInputText
        type="text"
        (input)="dt2.filterGlobal($event.target.value, 'contains')"
        placeholder="Buscar produto..."
      />
    </p-iconfield>
  </div>
</ng-template>

  <ng-template #header>
    <tr>
      <th style="width: 25%">Produto</th>
      <th style="width: 25%">Categoria</th>
      <th style="width: 25%">Preço</th>
      <th style="width: 25%">Status</th>
    </tr>

    <tr>
      <th>
        <p-columnFilter
          type="text"
          field="name"
          placeholder="Filtrar por nome"
          ariaLabel="Filter Name"
          filterOn="input"
        ></p-columnFilter>
      </th>
      <th>
        <p-columnFilter
          type="text"
          field="category"
          placeholder="Filtrar por categoria"
          ariaLabel="Filter Category"
          filterOn="input"
        ></p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="price" matchMode="between" [showMenu]="false">
          <ng-template #filter let-value let-filter="filterCallback">
            <div class="flex gap-2">
              <p-inputNumber
                mode="currency"
                currency="BRL"
                locale="pt-BR"
                [ngModel]="value?.[0]"
                (ngModelChange)="filter([$event, value?.[1]])"
                placeholder="De R$"
              ></p-inputNumber>
              <p-inputNumber
                mode="currency"
                currency="BRL"
                locale="pt-BR"
                [ngModel]="value?.[1]"
                (ngModelChange)="filter([value?.[0], $event])"
                placeholder="Até R$"
              ></p-inputNumber>
            </div>
          </ng-template>
        </p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="active" type="boolean"></p-columnFilter>
      </th>
    </tr>
  </ng-template>

  <ng-template #body let-product>
    <tr>
      <td>{{ product.name }}</td>
      <td>{{ product.category }}</td>
      <td>{{ product.price | currency: 'BRL':'symbol':'1.2-2':'pt-BR' }}</td>
      <td>
        <p-tag
          [value]="product.active ? 'Ativo' : 'Inativo'"
          [severity]="product.active ? 'success' : 'danger'"
        ></p-tag>
      </td>
    </tr>
  </ng-template>

  <ng-template #emptymessage>
    <tr>
      <td colspan="4">Nenhum produto encontrado.</td>
    </tr>
  </ng-template>
</p-table>



<!-- <cardappio-list
    [params]="{
        service: service,
        route: 'product',
        columns: [
            {title: 'Nome', field: 'name', size: 5},
            {title: 'Categoria', field: 'category', size: 3},
            {title: 'Preço', field: 'price', size: 3},
            {title: 'Status', field: 'active', size: 3}
        ],
        filters: [
            {
                icon: 'fa-solid fa-bowl-food',
                title: 'Produto',
                value: 'name',
                typeValue: 'string'
            },
                        {
                icon: 'fa-solid fa-circle-check',
                title: 'Status',
                value: 'active',
                typeValue: 'boolean'
            },
                        {
                icon: 'fa-solid fa-money-bill',
                title: 'Preço',
                value: 'price',
                typeValue: 'number'
            }
        ]
    }"
>
<ng-template #active let-item>
    @if(item.active){
        <span style="color: #51CF66;">
            <i class="fa-solid fa-circle-check"></i>
        </span>
    } @else {
        <span style="color: #D33B19;">
            <i class="fa-solid fa-circle-xmark"></i>
        </span>
    }
</ng-template>
<ng-template #category let-item>
    {{ item.category.name }}
</ng-template>
<ng-template #expirationDate let-item>
    {{ item.expirationDate | date:'dd/MM/yyyy' }}
</ng-template>
<ng-template #price let-item>
    {{ item.price | currency:'BRL' }}
</ng-template>
</cardappio-list> -->
